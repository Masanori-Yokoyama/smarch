# 開発手順

## 1. 開発環境のセットアップ
- [ ] プロジェクト構造の作成
  ```
  project/
  ├── docker-compose.yml
  ├── docker/
  │   ├── lambda/
  │   │   ├── Dockerfile
  │   │   └── requirements.txt
  │   └── samba/
  │       ├── Dockerfile
  │       └── smb.conf
  ├── src/
  │   └── handler.py
  └── tests/
      └── test_handler.py
  ```
- [ ] docker-compose.ymlの作成（localstack, samba, lambda-local）
- [ ] Dockerfileの作成（lambda, samba）
- [ ] 設定ファイルの作成（requirements.txt, smb.conf）

## 2. Sambaサーバーの構築
- [ ] Sambaコンテナのビルドと起動
- [ ] テスト用共有フォルダの作成
- [ ] アクセス権限の設定
- [ ] 接続テスト

## 3. LocalStackの設定
- [ ] LocalStackコンテナの起動
- [ ] テスト用S3バケットの作成
- [ ] Systems Manager Parameter Storeの設定
- [ ] AWS CLIでの動作確認

## 4. Lambda関数の実装
- [ ] SMB接続処理の実装
- [ ] ファイル一覧取得処理の実装
- [ ] S3アップロード処理の実装
- [ ] ファイル削除処理の実装
- [ ] エラーハンドリングの実装

## 5. テストコードの実装
- [ ] テスト環境のセットアップ
- [ ] ユニットテストの実装
- [ ] 統合テストの実装
- [ ] テストデータの準備

## 6. ローカルテスト実行
- [ ] Pytestの実行環境設定
- [ ] テストケースの実行
- [ ] カバレッジレポートの確認
- [ ] バグ修正とリファクタリング

## 7. CI/CD準備（オプション）
- [ ] GitHubワークフローの作成
- [ ] テスト自動化の設定
- [ ] コードフォーマットチェックの追加
- [ ] セキュリティスキャンの追加

## 8. デプロイメント準備
- [ ] AWS環境との差分確認
- [ ] 環境変数の整理
- [ ] デプロイメントスクリプトの作成
- [ ] デプロイ手順書の作成

## 注意事項
- LocalStackとAWS実環境の違いに注意
- セキュリティ設定は開発環境と本番環境で適切に分ける
- テストデータは機密情報を含まないようにする
- エラーハンドリングは実運用を想定して実装する

## 完了条件
- [ ] すべてのテストが成功すること
- [ ] ローカル環境で正常に動作すること
- [ ] コードレビューが完了していること
- [ ] ドキュメントが更新されていること

## タイムライン
1. 環境セットアップ: 1日
2. 基本実装: 2日
3. テスト実装: 1日
4. テストと修正: 1日
5. ドキュメント作成: 0.5日

合計: 5.5日程度

## 関連リソース
- Docker Compose ドキュメント
- LocalStack ドキュメント
- AWS Lambda Python ドキュメント
- Samba 設定ガイド
- PyTest ドキュメント